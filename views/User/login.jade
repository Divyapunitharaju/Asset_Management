doctype html
html
    head
        title Signup
        link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css")
        style.
            .centered-form {
                width: 50%;
                margin: 0 auto;
                margin-top: 10%;
                padding: 20px;
                border: 1px solid #ddd;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
    body
        .container
            .centered-form
                h2.text-center LOGIN
                form#loginForm(method="POST" )
                    .mb-3 
                        
                        label(for="email") Email 
                        input#email.form-control(type="email" name=email placeholder="Enter Your Email" required)
                    .mb-3 
                        label(for="password") Password 
                        input#password.form-control(type="password" name=password placeholder="*******" required)
                
                    button.btn.btn-primary#BtnSubmit(type="submit") Login

                    .mb-3
                    p Don't Have an account ?? <a href="/user/signup">Signup here</a>

    script.
        
        const form=document.getElementById('loginForm')
        const BtnSubmit=document.getElementById('BtnSubmit')

        form.addEventListener('submit',async (e)=>{
            e.preventDefault()
            
            const email=document.getElementById('email').value
            const password=document.getElementById('password').value

            if(!email || !password){
                alert("All fields are required")
            }
            

            const loginData={email,password}
            try{
             const response= await fetch('http://localhost:3000/user/login',{
                method:"POST",
                headers:{
                    "Content-Type":"application/json"
                },
                body : JSON.stringify(loginData)
             })
             
            if(response.ok){
               const result=await response.json()
               console.log(result)
               alert(result.message)
               window.location.href = '/user/dashboard'
               form.reset()
            }
            else{
              const error=await response.json()
              alert("Error : " + error.message)
            }
            
            }
            
            catch(error){
                console.log(error)
                alert("An unexpected error occurred . Please try again")
            }
           
        })
