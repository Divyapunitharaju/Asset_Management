doctype html
html
  head
    title Issuse Asset
    link(rel="stylesheet", href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css")
    style.
            .centered-form {
                width: 50%;
                margin: 0 auto;
                margin-top: 10%;
                padding: 20px;
                border: 1px solid #ddd;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
  body
    .container
        .centered-form
          h2.my-4.text-center RETURN ASSET
          form#returnAssetForm
            .mb-3
              
                select#asset.form-control(name="assetId")
                  option(value="" disabled selected) ---Select Asset---
                  each asset in assets 
                    option(value=asset.id) #{asset.name} (Serial: #{asset.serialNo})
            .mb-3 
              
                select#employee.form-control(name="employeeId") 
                  option(value="" disabled selected) ---Select Employee---
                  each employee in employees 
                    option(value=employee.id) #{employee.name} (ID: #{employee.id})
            .mb-3 
              
              input#returnDate.form-control(type="date" name="returnDate" )
            .mb-3
              textarea#returnReason.form-control(type="text" name="returnReason") 
          .d-flex.justify-content-center 
            button#submitBtn.btn.btn-primary(type="submit") Submit

    script.
      const form = document.getElementById('returnAssetForm');
      const submitBtn = document.getElementById('submitBtn');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const assetId = document.getElementById('asset').value
        const employeeId = document.getElementById('employee').value
        const returnDate = document.getElementById('returnDate').value
        const returnReason = document.getElementById('returnReason').value


        const issueData = { assetId, employeeId, returnDate,returnReason };
        try {
          const response = await fetch('http://localhost:3000/return/', {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(issueData)
          })

          if (response.ok) {
            const result = await response.json();
            console.log(result)
            alert(result.message);
            form.reset()
          } else {
            const error = await response.json();
            alert("Error: " + error.message);
          }
        } catch (err) {
          console.error(err);
          alert("An unexpected error occurred. Please try again.");
        }
      })
